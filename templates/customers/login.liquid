{% comment %}
  行天

{% render 'login-gyoten' %}
{% endcomment %}
{% comment %}
  仙八

{% render 'login-senpachi' %}
{% endcomment %}
{%comment%}
  デフォルト
{% endcomment %}
{% render 'login-defalt' %}


<div id="login-error" class="page-width">
  {% form 'customer_login', novalidate: 'novalidate' %}
  <input id="custom_checkout_url" type="hidden" name="checkout_url" value="" />

  {%- if form.errors -%}
    <div class="form-message form-message--error">
      <h2 class="h3 form-message__title " tabindex="-1" data-form-status>{{ 'contact.form.error_heading' | t }}</h2>
      {{ form.errors | default_errors }}
      <p>
        トップページのログインリンクから再度ログインしてください。
      </p>
      <a href="/">トップページへ</a>
    </div>
  {%- endif -%}
  {% endform %}

  {% form 'recover_customer_password' %}
    {%- if form.errors -%}
      <span id="RecoverEmail-email-error" class="input-error-message">
        <span class="visually-hidden">{{ 'general.accessibility.error' | t }} </span>
        {% include 'icon-error' %}
        <span>{{ form.errors.messages['form'] }}</span>
      </span>
    {%- endif -%}
  {% endform %}
</div>

<style>
  /* .custom-login {
    display: none;
  }
  .custom-login.display {
    display: block;
  }
  .form-message--error {
    margin-top: 20px;
  } */
</style>

<script>
  // var queryString = window.location.search;
  // var queryObject = new Object();
  // if(queryString){
  //   queryString = queryString.substring(1);
  //   var parameters = queryString.split('&');
  //   for (var i = 0; i < parameters.length; i++) {
  //     var element = parameters[i].split('=');
  //     var paramName = decodeURIComponent(element[0]);
  //     var paramValue = decodeURIComponent(element[1]);
  //     queryObject[paramName] = paramValue;
  //   }
  //   var shopId = document.getElementById(queryObject['id'])
  //   shopId.classList.add('display')
  // } 
</script>
<script>
  var ref = document.referrer;             // リファラ情報を得る
  var hereHost = window.location.hostname; // 現在ページのホスト(ドメイン)名を得る
  var inputA = document.getElementById("custom_checkout_url")
 console.log()
  // ホスト名が含まれるか探す正規表現を作る(大文字・小文字を区別しない)
  var sStr = "^https?://" + hereHost;
  var rExp = new RegExp( sStr, "i" );
  
  // リファラ文字列を判別
  if( ref.length == 0 ) {
      // リファラなしの場合
  }
  else if( ref.match( rExp ) ) {
      // マッチした場合＝アクセス元が自サイト内の場合
      inputA.value = ref
  }
  else {
      // マッチしない場合＝アクセス元がサイト外の場合
  }
</script>